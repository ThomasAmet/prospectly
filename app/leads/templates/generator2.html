{% extends 'app_base.html' %}


{% block header_content %}
  <!-- Beginning Card Header -->
  <div class="row align-items-center py-5 mb-4">
    <div class="col-lg-6 col-4">
      <!-- <h6 class="h2 text-white d-inline-block mb-0">Défaut</h6> -->
      <i class="ni ni-planet text-white"></i></a></li>
      <nav aria-label="breadcrumb" class="d-none d-md-inline-block ml-md-4 mr-md-6">
        <ol class="breadcrumb breadcrumb-links breadcrumb-dark">
          <!-- <li class="breadcrumb-item"><a href="#"><i class="fas fa-home"></i></a></li> -->
          <li class="breadcrumb-item"><a href="#">Leads</a></li>
          <li class="breadcrumb-item active" aria-current="page">Generator</li>
        </ol>
      </nav>
      <button type="button" class="btn btn-sm btn-default">
	    <span class="text-capitalize">Restant </span><span>à exporter</span>
	    <span class="badge badge-primary">24</span>
	  </button>
    </div>
    <div class="col-lg-6 col-8 text-right">
      <!-- <a href="#" class="btn btn-sm btn-neutral">Actions</a> -->
        <button class="btn btn-neutral" type="button" data-toggle="collapse" data-target="#collapseSettings" aria-expanded='false'>
          <span class="btn-inner--icon"><i class="ni ni-settings-gear-65"></i></span>
          <span class="btn-inner--text">Paramètres</span>
        </button>
        <!-- <div class="dropdown-menu">
          <a class="dropdown-item" href="" id='deleteAllOpportunities'>Supprimer la sélection</a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="#">
            <span class='text-capitalize'>éditer</span> les étapes
          </a>
          <a class="dropdown-item" href="#">
            <span class='text-capitalize'>éditer</span> les status
          </a>
        </div> -->  
    </div>
  </div>
{% endblock header_content %}

{% block main_content %}

	<!-- Cards Settings -->
    <div class="collapse" id="collapseSettings">
      <div class="row">

      	<!-- Company Settings  -->
        <div class="col-lg-6">
          <div class="card-wrapper">
            <div class="card">
              <div class="card-header">
              	<div class='row mx-2'>
              		<div class='col-10'>
              			<div class="row  align-items-center">
              				<i class="ni ni-settings-gear-65"></i>
                			<h3 class="mb-0 ml-2">Recherche d'entreprises</h3>
              			</div>
              		</div>
                	<div class='col-2 px-0 text-right'>
                		<label class="custom-toggle custom-toggle-default">
                    		<input type="checkbox" checked id='checkoxCompanySettings'>
                    		<span class="custom-toggle-slider rounded-circle" data-label-off="Non" data-label-on="Oui"></span>
                  		</label>
                	</div>
                </div>
              </div>
              <div class="card-body">
                <form>
                  <div class="row">
                    <div class="col-md-6">
                      <div class="form-group">
                        <div class="input-group input-group-merge">
                          <input class="form-control company-settings-form-group" placeholder="Location" type="text" disabled="true">
                          <div class="input-group-append">
                            <span class="input-group-text"><i class="ni ni-pin-3"></i></span>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="form-group">
                        <div class="input-group input-group-merge">
                          <input class="form-control company-settings-form-group" placeholder="Secteur d'activité">
                          <div class="input-group-append">
                            <span class="input-group-text"><i class="ni ni-shop"></i></span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>

        <!-- Contacts Settings  -->
        <div class="col-lg-6">
          <div class="card-wrapper">
            <div class="card">
              <div class="card-header">
              	<div class='row mx-2'>
              		<div class='col-10'>
              			<div class="row  align-items-center">
              				<i class="ni ni-settings-gear-65"></i>
                			<h3 class="mb-0 ml-2">Recherche de contacts</h3>
              			</div>
              		</div>
                	<div class='col-2 px-0 text-right'>
                		<label class="custom-toggle custom-toggle-default">
                    		<input type="checkbox" checked id='checkoxCompanySettings'>
                    		<span class="custom-toggle-slider rounded-circle" data-label-off="Non" data-label-on="Oui"></span>
                  		</label>
                	</div>
                </div>
              </div>
              <div class="card-body">
                <form>
                  <div class="row">
                  	<div class="col-md-4">
                      <div class="form-group">
                        <div class="input-group input-group-merge">
                          <input class="form-control company-settings-form-group" placeholder="Position/Poste" type="text" disabled="true">
                          <div class="input-group-append">
                            <span class="input-group-text"><i class="ni ni-badge"></i></span>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="form-group">
                        <div class="input-group input-group-merge">
                          <input class="form-control company-settings-form-group" placeholder="Location" type="text">
                          <div class="input-group-append">
                            <span class="input-group-text"><i class="ni ni-pin-3"></i></span>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="form-group">
                        <div class="input-group input-group-merge">
                          <input class="form-control company-settings-form-group" placeholder="Secteur d'activité">
                          <div class="input-group-append">
                            <span class="input-group-text"><i class="ni ni-shop"></i></span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>

	  </div>
	</div>
  	<!-- end collapsible settings -->

	  <!-- Cards Tables -->
	  <div class='row'>

	  	<!-- Company Leads Table -->
	    <div class='col-md-6 col-12'>
	      <div class='card shadow'>
		    <div class="card-header border-0">
		    	<div class='row'>
		    		<div class='col-md-8 col-6 mr-auto'>
		    			<h3 class="mb-0">Entreprises</h3>
		    		</div>
		    		<div class='col-md-4 col-6 text-right'>
		      		<a class="btn btn-sm btn-icon btn-3 btn-primary" role="button" id='searchCompanyLeads' href="">
		        		<span class="btn-inner--icon"><i class="fa fa-search"></i></span>
		      		</a>
		    		<a class="btn btn-sm btn-3 btn-primary" role="button" id='refreshCompanyLeads' href="">
			        	<span class="btn-inner--icon"><i class="fa fa-redo"></i></span>
			      	</a>
	        	  	<a class="btn btn-sm btn-3 btn-primary" role="button" id='uplaodCompanyLeads' href="">
			        	<span class="btn-inner--icon"><i class="ni ni-cloud-upload-96"></i></span>
			      	</a>
		      		</div>
		    	</div>
	        </div>
	        <div class='card-body border-0 px-0 py-0'>
        	  <!-- Table -->
		      <div class="table-responsive table-hover rounded">
		        <table class="table align-items-center table-flush" id='companyLeadsTable'>
		          <!-- Table Head -->
		          <thead class="thead-light">
		            <tr>
		              <th>
		                <span class="custom-checkbox">
		                  <input type="checkbox" id="selectAll">
		                  <!-- <label for="selectAll"></label> -->
		                </span>
		              </th>
		              <th scope="col" data-sort='company_name'>Entreprise</th>
		              <th scope="col" data-sort='company_city'>Ville</th>
		              <th scope="col" data-sort='company_email'>Email</th>
		              <th scope="col" data-sort='company_website'>Site web</th>
		            </tr>
	              </thead>
   	              <!-- End Table Head -->
	              <!-- Table Body -->
                  <tbody>
		          {% for lead in company_leads %}
		            <tr>
		              <!-- Checkbox  -->
		              <td>
		                <span class="custom-control custom-checkbox px-0">
		                  <input type="checkbox" name="checkbox[]" id="checkbox_{{lead.id}}" value="{{lead.id}}">
		                </span>
		              </td>
		              <td>
		                <div class="media align-items-center">
		                  <div class="media-body">
		                    <span class="mb-0 text-sm company_name">{{lead.company_name}}</span>
		                  </div>
		                </div>
		              </td>
		              <td>
		                <span class="company_city">{{lead.company_city}}</span>
		              </td>
		              <td>
		                <!-- span is used to retrieve value with jquery and hide if val == None -->
		                <span class="company_email">{{lead.comapny_email}}</span>
		              </td>
		              <td>
		                <!-- email -->
		                <span class="company_website">{{ lead.company_website }}</span>
		              </td>
		            </tr>
		       	  {% endfor %}
		          </tbody>
		        </table>
		      </div>
	      	</div>
	      	<!-- End of card body -->
	        <div class="card-footer py-4">
	          <nav aria-label="...">
	            <ul class="pagination justify-content-end mb-0">
	              {% if previous_page_token is not none %}
	                <li class="page-item">
	                  <a class="page-link" href="?page_token={{previous_page_token}}" tabindex="-1">
	                    <i class="fas fa-angle-left"></i>
	                    <span class="sr-only">Page precedente</span>
	                  </a>
	                </li>
	              {% else %}
	                <li class="page-item disabled">
	                  <a class="page-link" href="#" tabindex="-1">
	                    <i class="fas fa-angle-left"></i>
	                    <span class="sr-only">Page precedente(desactivee)</span>
	                  </a>
	                </li>
	              {% endif %}
	              {% if next_page_token is not none %}                  
	              <li class="page-item">
	                <a class="page-link" href="?page_token={{next_page_token}}">
	                  <i class="fas fa-angle-right"></i>
	                  <span class="sr-only">Page suivante</span>
	                </a>
	              </li>
	              {% else %}
	              <li class="page-item disabled">
	                <a class="page-link" href="">
	                  <i class="fas fa-angle-right"></i>
	                  <span class="sr-only">Page suivante</span>
	                </a>
	              </li>
	              {% endif %}
	            </ul>
	          </nav>
	        </div>
	        <!-- end of card footer -->
	      </div>
	    </div>

	   	<!-- Contacts Leads Table -->
	    <div class='col-md-6 col-12'>
	      <div class='card shadow'>
		    <div class="card-header border-0">
		    	<div class='row'>
		    		<div class='col-6 col-md-8 mr-auto'>
		    			<h3 class="mb-0">Contacts</h3>
		    		</div>
		    		<div class='col-6 col-md-4 text-right'>
		      		<a class="btn btn-sm btn-icon btn-3 btn-primary" role="button" id='searchContactLeads' href="">
		        		<span class="btn-inner--icon"><i class="fa fa-search"></i></span>
		      		</a>
		    		<a class="btn btn-sm btn-3 btn-primary" role="button" id='refreshContactLeads' href="">
			        	<span class="btn-inner--icon"><i class="fa fa-redo"></i></span>
			      	</a>
	        	  	<a class="btn btn-sm btn-3 btn-primary" role="button" id='uploadContactLeads' href="">
			        	<span class="btn-inner--icon"><i class="ni ni-cloud-upload-96"></i></span>
			      	</a>
		      		</div>
		    	</div>
	        </div>
	        <div class='card-body border-0 px-0 py-0'>
        	  <!-- Table -->
		      <div class="table-responsive table-hover rounded">
		        <table class="table align-items-center table-flush" id='contactLeadsTable'>
		          <!-- Table Head -->
		          <thead class="thead-light">
		            <tr>
		              <th>
		                <span class="custom-checkbox">
		                  <input type="checkbox" id="selectAllContacts">
		                  <!-- <label for="selectAll"></label> -->
		                </span>
		              </th>
		              <th scope="col" data-sort='contact_firstname'>Prénom</th>
		              <th scope="col" data-sort='contact_lastname'>Nom</th>
		              <th scope="col" data-sort='contact_company'>Entreprise</th>
		              <th scope="col" data-sort='contact_email'>Email</th>
		              <th scope="col"></th>
		            </tr>
	              </thead>
   	              <!-- End Table Head -->
	              <!-- Table Body -->
                  <tbody>
		          {% for lead in contact_leads %}
		            <tr>
		              <!-- Checkbox  -->
		              <td>
		                <span class="custom-control custom-checkbox px-0">
		                  <input type="checkbox" name="checkbox[]" id="checkbox_{{lead.id}}" value="{{lead.id}}">
		                </span>
		              </td>
		              <td>
		                <div class="media align-items-center">
		                  <div class="media-body">
		                    <span class="mb-0 text-sm contact_firstname">{{lead.contact_firstname}}</span>
		                  </div>
		                </div>
		              </td>
		              <td data-toggle="modal" data-target='#editContactModal_{{contact.id}}'>
		                {{lead.company_city}}
		              </td>
		              <td data-toggle="modal" data-target='#editContactModal_{{contact.id}}'>
		                <!-- span is used to retrieve value with jquery and hide if val == None -->
		                <span class="entreprise-cell">{{contact.company_activity_field}}</span>
		              </td>
		              <td data-toggle="modal" data-target='#editContactModal_{{contact.id}}'>
		                <!-- email -->
		                {{ lead.company_email }}
		              </td>
		            </tr>
		       	  {% endfor %}
		          </tbody>
		        </table>
		      </div>
	      	</div>
	      	<!-- End of card body -->
	        <div class="card-footer py-4">
	          <nav aria-label="...">
	            <ul class="pagination justify-content-end mb-0">
	              {% if previous_page_token is not none %}
	                <li class="page-item">
	                  <a class="page-link" href="?page_token={{previous_page_token}}" tabindex="-1">
	                    <i class="fas fa-angle-left"></i>
	                    <span class="sr-only">Page precedente</span>
	                  </a>
	                </li>
	              {% else %}
	                <li class="page-item disabled">
	                  <a class="page-link" href="#" tabindex="-1">
	                    <i class="fas fa-angle-left"></i>
	                    <span class="sr-only">Page precedente(desactivee)</span>
	                  </a>
	                </li>
	              {% endif %}
	              {% if next_page_token is not none %}                  
	              <li class="page-item">
	                <a class="page-link" href="?page_token={{next_page_token}}">
	                  <i class="fas fa-angle-right"></i>
	                  <span class="sr-only">Page suivante</span>
	                </a>
	              </li>
	              {% else %}
	              <li class="page-item disabled">
	                <a class="page-link" href="">
	                  <i class="fas fa-angle-right"></i>
	                  <span class="sr-only">Page suivante</span>
	                </a>
	              </li>
	              {% endif %}
	            </ul>
	          </nav>
	        </div>
	        <!-- end of card footer -->
	      </div>
	    </div>
	  </div>
    {% endblock main_content %}     

    {% block footer %}
      <!-- Footer -->
      <footer class="footer pt-0">
        <div class="row align-items-center justify-content-lg-between">
          <div class="col-lg-6">
            <div class="copyright text-center text-lg-left text-muted">
              &copy; 2019 <a href="https://www.creative-tim.com" class="font-weight-bold ml-1" target="_blank">Creative Tim</a>
            </div>
          </div>
          <div class="col-lg-6">
            <ul class="nav nav-footer justify-content-center justify-content-lg-end">
              <li class="nav-item">
                <a href="https://www.creative-tim.com" class="nav-link" target="_blank">Creative Tim</a>
              </li>
              <li class="nav-item">
                <a href="https://www.creative-tim.com/presentation" class="nav-link" target="_blank">About Us</a>
              </li>
              <li class="nav-item">
                <a href="http://blog.creative-tim.com" class="nav-link" target="_blank">Blog</a>
              </li>
              <li class="nav-item">
                <a href="https://www.creative-tim.com/license" class="nav-link" target="_blank">License</a>
              </li>
            </ul>
          </div>
        </div>
      </footer>
    {% endblock footer %}
  

